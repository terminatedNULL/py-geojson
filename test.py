import json, os
import geojson as geo

if __name__ == "__main__":
    # Automatic parsing from GeoJSON file or text
    with open("test.geo.json") as f:
      test_geojson = json.loads(f.read())
      geojson = geo.GeoJSON(test_geojson)
    print("Loaded GeoJSON object <- test.geo.json")

    # Runtime building of GeoJSON object
    build_geojson = geo.GeoJSON()
    build_geojson.add_feature(geo.Point.create(-85.109754, 41.084009), "point_alias")   # Point

    points = [[-85.105, 41.08], [-85.105, 41.09], [-85.12, 41.08]]
    build_geojson.add_feature(geo.MultiPoint.create(*geo.Point.many(*points)))                  # MultiPoint

    star_points = [
        [-85.11372465016944, 41.07940650347186],
        [-85.11261766881117, 41.08372802435227],
        [-85.11116372314117, 41.07944386639261],
        [-85.11506294106016, 41.08185996647174],
        [-85.10980891013529, 41.081922235918654],
        [-85.11372465016409, 41.079369140232075]
    ]
    build_geojson.add_feature(geo.LineString.create(*geo.Point.many(*star_points)))             # LineString

    line_strings = [
        [[-85.11898192227824, 41.084335734969386],[-85.11923412676987, 41.08496193515873],[-85.11757706665954, 41.084769055314666],[-85.11848203571739, 41.08412048881894],[-85.11916447143683, 41.083527827599426],[-85.1192386492283, 41.084366497521586],[-85.11762157337105, 41.08516042851966],[-85.11827433793727, 41.08408694207006],[-85.11871940468734, 41.08465723393002]],
        [[-85.11957809885159, 41.08491386084373],[-85.11965227671043, 41.084723764832404],[-85.12027474512611, 41.084623313997554],[-85.11972582946797, 41.08426548420468],[-85.12000770509523, 41.08475749966334],[-85.12027261585236, 41.084324552768976],[-85.11954567349467, 41.084648835810185]],
        [[-85.11942974326861, 41.08559596547309],[-85.11945941438522, 41.08513750248599],[-85.11969678331855, 41.085316415251896],[-85.11894016984367, 41.085316415251896],[-85.11916270321869, 41.08557360149919],[-85.11999349448506, 41.085316415251896]]
    ]
    build_geojson.add_feature(geo.MultiLineString.create(*geo.LineString.many(*line_strings)))  # MultiLineString

    plus_points = [[-85.20554053437812, 41.08074439386607], [-85.20554721419318, 41.080728328372146], [-85.20555624644918, 41.080707743628665], [-85.20564416743338, 41.08072994198395], [-85.20565790456351, 41.080700318737115], [-85.20579777404404, 41.08073407606244], [-85.20586357170867, 41.08058468269638], [-85.2057309528899, 41.080552083160086], [-85.20575908546534, 41.08049049415396], [-85.20508616883502, 41.08033163826764], [-85.20497091780451, 41.08060692960305], [-85.20554053437812, 41.08074439386607]]
    build_geojson.add_feature(geo.Polygon.create(*geo.Point.many(*plus_points)))                # Polygon

    m_polygons = [
        [[-85.10554053437812, 41.08074439386607], [-85.10554721419318, 41.080728328372146],
         [-85.10555624644918, 41.080707743628665], [-85.10564416743338, 41.08072994198395],
         [-85.10565790456351, 41.080700318737115], [-85.10579777404404, 41.08073407606244],
         [-85.10586357170867, 41.08058468269638], [-85.1057309528899, 41.080552083160086],
         [-85.10575908546534, 41.08049049415396], [-85.10508616883502, 41.08033163826764],
         [-85.10497091780451, 41.08060692960305], [-85.10554053437812, 41.08074439386607]],
        [[-86.10554053437812, 41.08074439386607], [-86.10554721419318, 41.080728328372146],
         [-86.10555624644918, 41.080707743628665], [-86.10564416743338, 41.08072994198395],
         [-86.10565790456351, 41.080700318737115], [-86.10579777404404, 41.08073407606244],
         [-86.10586357170867, 41.08058468269638], [-86.1057309528899, 41.080552083160086],
         [-86.10575908546534, 41.08049049415396], [-86.10508616883502, 41.08033163826764],
         [-86.10497091780451, 41.08060692960305], [-86.10554053437812, 41.08074439386607]]
    ]
    build_geojson.add_feature(geo.MultiPolygon.create(*geo.Polygon.many(*m_polygons)))          # MultiPolygon

    geometries = [
        {
            "type": "Feature",
            "properties": {},
            "geometry": {
                "coordinates": [
                    -85.19175024759434,
                    41.11794294978904
                ],
                "type": "Point"
            }
        },
        {
            "type": "Feature",
            "properties": {},
            "geometry": {
                "coordinates": [
                    -85.17724968070705,
                    41.11906028076905
                ],
                "type": "Point"
            }
        },
        {
            "type": "Feature",
            "properties": {},
            "geometry": {
                "coordinates": [
                    [-85.20496033453563, 41.11253908946304],
                    [-85.19854608533029, 41.106874230346335],
                    [-85.1880943315557, 41.1038407003322],
                    [-85.17743884086552, 41.10481012881061],
                    [-85.16844094695233, 41.1073083079533],
                    [-85.16016915947027, 41.111455858332846],
                    [-85.15851500319128, 41.11325372062609],
                    [-85.16163829867027, 41.112561684458996],
                    [-85.17412579452308, 41.11200089693409],
                    [-85.18999706112848, 41.11158326645946],
                    [-85.19825377776867, 41.11213103923765],
                    [-85.2046705025876, 41.11253954694533]
                ],
                "type": "LineString"
            }
        }
    ]
    build_geojson.add_feature(geo.GeometryCollection.create(*geometries))                       # GeometryCollection

    geometries = [
        geo.Point.create(3, 4),
        geo.Point.create(3.01, 4.01),
        geo.Point.create(3.02, 4.02)
    ]
    build_geojson.add_feature(geo.GeometryCollection.create(*geometries))                       # GeometryCollection

    print("Built GeoJSON object -> generated.geo.json")
    with open("generated.geo.json", "w") as f:
        f.write(str(build_geojson))
